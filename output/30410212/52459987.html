<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh-CN"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><link rel="stylesheet" type="text/css" href="http://storage.360buyimg.com/ebooks/9fd8bb77eb40456b746aaae41785499a_new_.css" /><title>第9章 Angular数据架构</title></head><body><p class="center"><img src="https://img30.360buyimg.com/ebookadmin/jfs/t17515/58/2699236094/48909/7218816/5b03d541N32d5f64e.jpg" class="fullscreen" alt="" href="./image/Figure-09.jpg" /></p><p class="sectionTitle biaoti3"><a id="sec001"></a>数据架构概览</p><p class="content">管理数据可以说是编写可维护应用最棘手的方面之一。有很多种方法可以将数据应用到你的应用之中：</p><p class="content">●AJAX HTTP请求</p><p class="content">●Websocket</p><p class="content">●Indexdb</p><p class="content">●LocalStorage</p><p class="content">●LocalStorage</p><p class="content">●Service Worker</p><p class="content">●等等</p><p class="content">数据架构涉及的问题如下。</p><p class="content">●如何将所有不同的数据源聚合成一个完整的体系？</p><p class="content">●如何防止意想不到的副作用导致bug？</p><p class="content">●如何更好地构建代码以使其更容易维护并让新来的团队成员更容易上手？</p><p class="content">●当数据发生变化时，如何让应用尽快作出反应？</p><p class="content">多年以来，MVC一直是构建数据应用的标准模式：模型包含业务逻辑，视图负责显示数据，控制器将所有一切联系在一起。不过问题是，我们知道MVC模式并不能很好地直接转化到客户端的网络应用中。</p><p class="content">目前，数据架构领域出现了复兴并有许多新理念涌现出来。</p><p class="content">●<b>MVW/双向数据绑定</b>：Model-View-Whatever<sup><a class="mz-footnote-link" href="#footnote1"><img alt="" src="https://img30.360buyimg.com/ebookadmin/jfs/t21616/337/214486965/1481/90828627/5b03d540N24da8434.png" href="./image/icon_note.png" /></a></sup>是用来形容AngularJS中默认架构的一个术语。$scope提供数据双向绑定，整个应用都共用同样的数据结构，某个区域的一个变化会传达至该应用的其余部分。</p><p class="content">●Flux<sup><a class="mz-footnote-link" href="#footnote2"><img alt="" src="https://img30.360buyimg.com/ebookadmin/jfs/t21616/337/214486965/1481/90828627/5b03d540N24da8434.png" href="./image/icon_note.png" /></a></sup>：它使用单向数据流。在Flux中，Store负责存储数据，View负责渲染Store中的数据，Action负责改变Store中的数据。虽然设置Flux有一点繁琐，但是因为数据只在一个方向上流动，所以很容易推断。</p><p class="content">●<b>可观察对象</b>：observable给我们提供了数据流。我们订阅数据流然后执行操作对变化作出反应。RxJS<sup><a class="mz-footnote-link" href="#footnote3"><img alt="" src="https://img30.360buyimg.com/ebookadmin/jfs/t21616/337/214486965/1481/90828627/5b03d540N24da8434.png" href="./image/icon_note.png" /></a></sup>是当下最流行的响应式JavaScript库，给我们提供了强有力的操作符，用来在数据流上组合一系列操作。</p><p class="center"><img src="https://img30.360buyimg.com/ebookadmin/jfs/t20827/10/215994487/12231/293f6125/5b03d541Ndff69dec.jpg" class="enlarge" alt="" href="./image/a-3.jpg" /></p><p class="content">还有很多关于这些理念的变种，例如：</p><p class="content">Flux作为一种模式而并非具体实现，它有<b>许多</b>不同的实现方案（就像MVC有许多的实现方案一样）；</p><p class="content">●Immutability是以上所有数据架构的一个常见变种；</p><p class="content">●Falcor<sup><a class="mz-footnote-link" href="#footnote4"><img alt="" src="https://img30.360buyimg.com/ebookadmin/jfs/t21616/337/214486965/1481/90828627/5b03d540N24da8434.png" href="./image/icon_note.png" /></a></sup>是一个强大的框架，可以帮你将客户端模型和服务端数据进行绑定。</p><p class="content">●Falcor通常使用可观察对象类型的数据架构。</p><p class="listTitle1 biaoti8">Angular数据架构</p><p class="content">Angular在数据架构的选择上极其灵活。一种数据策略在一个项目中可行并不代表在另一个项目中也可行，所以Angular并未规定具体的技术栈，而是力图让你无论选择何种数据架构都能很容易使用（同时保持高性能）。</p><p class="content">这样的好处是，你可以拥有足够的灵活性来让Angular适应几乎任何情况。只是有一点不太好：你将不得不自己选择适合项目的数据架构。</p><p class="content">别担心，我们不会让你自己去作出这个艰难的决定！在接下来的几章里，我们将教你如何使用这里提到的某些模式来构建应用。</p><ol class="mz-footnote"><li id="footnote1">https：//plus.google.com/+AngularJS/posts/aZNVhj355G2</li><li id="footnote2">https：//facebook.github.io/flux/</li><li id="footnote3">https：//github.com/Reactive-Extensions/RxJS</li><li id="footnote4">http：//netflix.github.io/falcor/</li></ol></body></html>